# Install packages with apt
- name: Install tmux
  apt:
    name: tmux
    state: present
  become: yes

- name: Install peco
  apt:
    name: peco
    state: present
  become: yes

# Setup configs
- name: Create symbolic link for tmux config
  file:
    src: "{{ role_path }}/tmux/tmux.conf"
    dest: "{{ ansible_env.HOME }}/.tmux.conf"
    state: link

- name: Create symbolic link for docker config
  file:
    src: "{{ role_path }}/docker"
    dest: "{{ ansible_env.HOME }}/.docker"
    state: link

- name: Create symbolic link for git config
  file:
    src: "{{ role_path }}/git/gitignore_global"
    dest: "{{ ansible_env.HOME }}/.gitignore_global"
    state: link

- name: Setup gitignore global
  shell: git config --global core.excludesfile {{ ansible_env.HOME }}/.gitignore_global

- name: Create symbolic link for gdb-dashboard
  file:
    src: "{{ role_path }}/gdb/gdb-dashboard/.gdbinit"
    dest: "{{ ansible_env.HOME }}/.gdbinit"
    state: link

- name: Create symbolic link for vim
  file:
    src: "{{ role_path }}/vim/vimrc"
    dest: "{{ ansible_env.HOME }}/.vimrc"
    state: link

- name: Create symbolic link for zsh
  file:
    src: "{{ role_path }}/zsh/rc.zsh"
    dest: "{{ ansible_env.HOME }}/.zshrc"
    state: link

- name: Setup Anaconda
  block:
    - name: Download Anaconda shell script
      get_url:
        url: https://repo.anaconda.com/archive/Anaconda3-2023.03-1-Linux-x86_64.sh
        dest: "{{ ansible_env.HOME }}/anaconda.sh"
    - name: Install Anaconda
      shell: /bin/bash ./anaconda.sh -b
      args:
        chdir: "{{ ansible_env.HOME }}"
